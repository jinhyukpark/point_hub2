<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#231F20">
    <title>PointHub - Fantasy Studio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100vh;
            overflow: hidden;
            font-family: 'Merriweather', serif;
            margin: 0;
            padding: 0;
        }

        @import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700;900&display=swap');

        /* Unity Canvas Scaler: Match Width or Height = Height, Reference Resolution = 1080x2160 */
        :root {
            --scale-factor: calc(100vh / 2160px);
            --popup-width: calc(800px * var(--scale-factor));
            --popup-height: calc(1000px * var(--scale-factor));
            --input-width: calc(650px * var(--scale-factor));
            --input-height: calc(175px * var(--scale-factor));
            --button-width: calc(600px * var(--scale-factor));
            --button-height: calc(180px * var(--scale-factor));
        }
        
        /* Fallback for browsers that don't support CSS custom properties */
        @supports not (--scale-factor: 1) {
            .auth-popup {
                width: 37vw;
                height: 46vw;
                min-width: 320px;
                max-width: 400px;
                min-height: 400px;
                max-height: 500px;
            }
            
            .input-field {
                width: 30vw;
                height: 8vw;
                min-width: 280px;
                max-width: 325px;
                min-height: 60px;
                max-height: 80px;
            }
            
            .auth-button {
                width: 24vw;
                height: 7vw;
                min-width: 260px;
                max-width: 300px;
                min-height: 50px;
                max-height: 70px;
            }
            
            .logo {
                width: 18vw;
                min-width: 100px;
                max-width: 125px;
                left: calc(50% - 122.5px);
                top: 5vh;
            }
        }

        /* Unity Canvas - Base Layer */
        #unity-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
            background: #231F20;
            pointer-events: none; /* Disabled by default to allow auth interaction */
        }
        
        /* Hide Unity when auth is visible */
        body:not(.authenticated) #unity-canvas {
            visibility: hidden;
        }
        
        /* Enable Unity interactions when authenticated */
        body.authenticated #unity-canvas {
            pointer-events: auto;
            visibility: visible;
        }

        /* Background for Auth Pages */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: url('./img/bg.png') no-repeat center center;
            background-size: cover;
            background-attachment: fixed;
            z-index: 500;
            display: none;
        }

        /* Logo - Always Top Layer */
        .logo {
            position: fixed;
            left: calc(50% - calc(490px * var(--scale-factor)));
            top: calc(125px * var(--scale-factor));
            width: calc(200px * var(--scale-factor));
            height: auto;
            z-index: 9999;
            
            /* Fallback for Samsung Internet and older browsers */
            -webkit-transform: translateX(-50%);
            -moz-transform: translateX(-50%);
            -ms-transform: translateX(-50%);
            transform: translateX(-50%);
        }
        
        /* Additional fallback for Samsung Internet */
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            .logo {
                left: 50%;
                margin-left: -100px;
                top: 5vh;
                width: 15vw;
                min-width: 100px;
                max-width: 150px;
            }
        }

        /* Authentication Container */
        .auth-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        /* Login/Signup Popup Styles */
        .auth-popup {
            /* Base styles only - specific styling applied per browser */
            width: var(--popup-width);
            height: var(--popup-height);
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: calc(100px * var(--scale-factor)) calc(75px * var(--scale-factor));
            
            /* Box sizing for better compatibility */
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            
            /* Default fallback */
            border: 2px solid #444;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
        }
        
        /* Samsung Internet specific fixes */
        @supports not (border-image: url() 50 fill) {
            .auth-popup {
                border: none;
                background: url('./img/login_popup_bg.png') no-repeat center center;
                background-size: 100% 100%;
                width: 80vw;
                height: 70vh;
                max-width: 400px;
                max-height: 500px;
                min-width: 320px;
                min-height: 400px;
                padding: 60px 40px;
            }
        }

        .auth-popup.signup {
            height: calc(1200px * var(--scale-factor));
            padding: calc(80px * var(--scale-factor)) calc(75px * var(--scale-factor));
        }

        .auth-title {
            color: #ffffff;
            font-size: calc(60px * var(--scale-factor));
            font-weight: bold;
            margin-bottom: calc(60px * var(--scale-factor));
            text-align: center;
            text-shadow: calc(2px * var(--scale-factor)) calc(2px * var(--scale-factor)) calc(4px * var(--scale-factor)) rgba(0,0,0,0.5);
            letter-spacing: calc(4px * var(--scale-factor));
        }

        .input-container {
            position: relative;
            margin-bottom: calc(40px * var(--scale-factor));
            width: var(--input-width);
            height: var(--input-height);
        }

        .input-container.signup {
            margin-bottom: calc(30px * var(--scale-factor));
        }

        .input-label {
            position: absolute;
            top: calc(40px * var(--scale-factor));
            left: calc(50px * var(--scale-factor));
            color: rgba(255, 255, 255, 0.5);
            font-size: calc(24px * var(--scale-factor));
            font-weight: 400;
            text-shadow: calc(1px * var(--scale-factor)) calc(1px * var(--scale-factor)) calc(2px * var(--scale-factor)) rgba(0,0,0,0.5);
            letter-spacing: calc(1px * var(--scale-factor));
            z-index: 2;
            pointer-events: none;
        }

        .input-field {
            width: var(--input-width);
            height: var(--input-height);
            
            /* Base styles only - specific styling applied per browser */
            color: #ffffff;
            font-size: calc(44px * var(--scale-factor));
            padding: calc(80px * var(--scale-factor)) calc(40px * var(--scale-factor)) calc(40px * var(--scale-factor)) calc(40px * var(--scale-factor));
            outline: none;
            font-family: 'Merriweather', serif;
            
            /* Default fallback */
            border: 2px solid #666;
            background: rgba(30, 30, 30, 0.9);
            border-radius: 8px;
            
            /* Smooth transitions */
            -webkit-transition: filter 0.3s ease;
            -moz-transition: filter 0.3s ease;
            -ms-transition: filter 0.3s ease;
            transition: filter 0.3s ease;
            
            /* Better box sizing */
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }

        
        /* Samsung Internet specific input field fixes */
        @supports not (border-image: url() 25 fill) {
            .input-field {
                width: 85%;
                height: 60px;
                min-width: 280px;
                max-width: 350px;
                border: 2px solid #333;
                border-radius: 8px;
                background: rgba(40, 40, 40, 0.8);
                font-size: 16px;
                padding: 15px 20px;
            }
            
            .input-field.password {
                background: rgba(40, 40, 40, 0.8);
                border-color: #444;
            }
        }

        .input-field:focus {
            filter: brightness(1.2) drop-shadow(0 0 calc(10px * var(--scale-factor)) rgba(139, 92, 246, 0.5));
        }

        .input-field.password:focus {
            filter: brightness(1.2) drop-shadow(0 0 calc(10px * var(--scale-factor)) rgba(6, 182, 212, 0.5));
        }

        /* Browser autofill override */
        .input-field:-webkit-autofill,
        .input-field:-webkit-autofill:hover,
        .input-field:-webkit-autofill:focus,
        .input-field:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 1000px transparent inset !important;
            -webkit-text-fill-color: #ffffff !important;
            background: transparent !important;
            transition: background-color 5000s ease-in-out 0s;
        }

        .auth-button {
            /* Base button styles */
            width: var(--button-width);
            height: var(--button-height);
            min-width: 300px;
            min-height: 60px;
            cursor: pointer;
            color: #ffffff;
            font-size: calc(32px * var(--scale-factor));
            font-weight: bold;
            text-shadow: calc(1px * var(--scale-factor)) calc(1px * var(--scale-factor)) calc(2px * var(--scale-factor)) rgba(0,0,0,0.5);
            margin-top: calc(40px * var(--scale-factor));
            
            /* Remove default border and background */
            border: none;
            background: transparent;
            
            /* Cross-browser transitions */
            -webkit-transition: transform 0.2s ease, filter 0.2s ease;
            -moz-transition: transform 0.2s ease, filter 0.2s ease;
            -ms-transition: transform 0.2s ease, filter 0.2s ease;
            transition: transform 0.2s ease, filter 0.2s ease;
            
            /* Better box sizing */
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }

        .auth-button.signup {
            margin-top: calc(30px * var(--scale-factor));
        }
        
        /* Samsung Internet specific button fixes */
        @supports not (border-image: url() 30 fill) {
            .auth-button {
                width: 80%;
                height: 50px;
                min-width: 250px;
                max-width: 300px;
                border: none;
                border-radius: 8px;
                background: linear-gradient(135deg, #4a90e2, #357abd);
                font-size: 18px;
                font-weight: bold;
                margin-top: 20px;
                
                /* Add touch-friendly styles */
                -webkit-tap-highlight-color: rgba(0,0,0,0);
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                user-select: none;
            }
            
            .auth-button.signup {
                background: linear-gradient(135deg, #27ae60, #229954);
                margin-top: 15px;
            }
        }

        .auth-button:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        .auth-button:active {
            transform: scale(0.95);
        }

        .auth-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .error-message {
            color: #ff6b6b;
            font-size: calc(14px * var(--scale-factor));
            margin-top: calc(10px * var(--scale-factor));
            text-align: center;
            text-shadow: calc(1px * var(--scale-factor)) calc(1px * var(--scale-factor)) calc(2px * var(--scale-factor)) rgba(0,0,0,0.5);
        }

        .success-message {
            color: #4caf50;
            font-size: calc(14px * var(--scale-factor));
            margin-top: calc(10px * var(--scale-factor));
            text-align: center;
            text-shadow: calc(1px * var(--scale-factor)) calc(1px * var(--scale-factor)) calc(2px * var(--scale-factor)) rgba(0,0,0,0.5);
        }

        .loading {
            display: none;
            color: #66ccff;
            font-size: calc(14px * var(--scale-factor));
            margin-top: calc(10px * var(--scale-factor));
            text-align: center;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.5);
            font-size: calc(32px * var(--scale-factor));
            text-decoration: none;
            margin-top: calc(20px * var(--scale-factor));
            text-shadow: calc(1px * var(--scale-factor)) calc(1px * var(--scale-factor)) calc(2px * var(--scale-factor)) rgba(0,0,0,0.5);
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover {
            color: #66ccff;
            text-decoration: underline;
        }

        /* Loading overlay */
        .unity-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #231F20;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #ffffff;
            font-size: calc(24px * var(--scale-factor));
            z-index: 2;
        }

        /* Hide classes */
        .hidden {
            display: none !important;
        }
        
        /* Samsung Internet Browser specific fixes - ÌÅ¨Î°¨ Ïä§ÌÉÄÏùº Í∏∞Î∞òÏúºÎ°ú ÌÅ¨Í∏∞Îßå Ï°∞Ï†ï */
        /* hidden ÌÅ¥ÎûòÏä§Í∞Ä Ï†úÎåÄÎ°ú ÏûëÎèôÌïòÎèÑÎ°ù - Îçî Íµ¨Ï≤¥Ï†ÅÏù∏ ÏÑ†ÌÉùÏûê ÏÇ¨Ïö© */
        .samsung-internet .auth-popup.hidden {
            display: none !important;
        }
        
        .samsung-internet .hidden {
            display: none !important;
        }
        
        /* Î°úÍ≥† ÌÅ¨Í∏∞Îßå Ï°∞Ï†ï - vw Îã®ÏúÑ ÏÇ¨Ïö© (CSS Î≥ÄÏàò ÎåÄÏã†) */
        .samsung-internet .logo {
            width: 18vw !important;
            max-width: 200px !important;
            min-width: 150px !important;
        }
        
        /* ÌåùÏóÖ ÌÅ¨Í∏∞Îßå Ï°∞Ï†ï - vw/vh Îã®ÏúÑ ÏÇ¨Ïö© */
        .samsung-internet .auth-popup:not(.hidden) {
            width: 80vw !important;
            max-width: 450px !important;
            min-width: 320px !important;
            height: auto !important;
            min-height: 60vh !important;
            max-height: 85vh !important;
            padding: 8vh 5vw 6vh 5vw !important;
            /* ÌÅ¨Î°¨Ïùò border-image ÎåÄÏã† background-image ÏÇ¨Ïö© */
            border: none !important;
            background: url('./img/login_popup_bg.png') no-repeat center center !important;
            background-size: 100% 100% !important;
            /* Í∏∞Î≥∏ flex Î†àÏù¥ÏïÑÏõÉ Ïú†ÏßÄ */
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
        }
        
        .samsung-internet .auth-popup.signup {
            min-height: 70vh !important;
            max-height: 90vh !important;
            padding: 6vh 5vw 5vh 5vw !important;
        }
        
        /* Ï†úÎ™© Ïä§ÌÉÄÏùº Ïú†ÏßÄ */
        .samsung-internet .auth-title {
            font-size: clamp(24px, 5vw, 32px) !important;
        }
        
        /* ÏûÖÎ†• ÌïÑÎìú Ïª®ÌÖåÏù¥ÎÑà - ÌÅ¨Í∏∞Îßå Ï°∞Ï†ï */
        .samsung-internet .input-container {
            width: 85% !important;
            max-width: 400px !important;
            height: auto !important;
            min-height: 70px !important;
            margin-bottom: 25px !important;
        }
        
        .samsung-internet .input-container.signup {
            margin-bottom: 20px !important;
        }
        
        /* ÏûÖÎ†• ÌïÑÎìú ÎùºÎ≤® ÏúÑÏπò Ï°∞Ï†ï - Í≥†Ï†ï ÌîΩÏÖÄ Í∞í ÏÇ¨Ïö© */
        .samsung-internet .input-label {
            top: 20px !important;
            left: 20px !important;
            font-size: 10px !important;
            color: rgba(255, 255, 255, 0.6) !important;
            font-weight: 400 !important;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5) !important;
            letter-spacing: 1px !important;
            z-index: 2 !important;
            pointer-events: none !important;
        }
        
        /* ÏûÖÎ†• ÌïÑÎìú Ïù¥ÎØ∏ÏßÄ - border-image ÎåÄÏã† background-image ÏÇ¨Ïö© */
        .samsung-internet .input-field {
            width: 100% !important;
            height: 70px !important;
            min-height: 70px !important;
            max-height: 80px !important;
            /* Ìå®Îî©: ÏÉÅÎã®Ïóê ÎùºÎ≤® Í≥µÍ∞Ñ ÌôïÎ≥¥, Ï¢åÏö∞ Ïó¨Î∞± ÌôïÎ≥¥ */
            padding: 35px 20px 15px 20px !important;
            font-size: 18px !important;
            color: #ffffff !important;
            font-family: 'Merriweather', serif !important;
            /* ÌÅ¨Î°¨Ïùò border-image ÎåÄÏã† background-image ÏÇ¨Ïö© */
            border: none !important;
            background: url('./img/UI_Email.png') no-repeat center center !important;
            background-size: 100% 100% !important;
            box-sizing: border-box !important;
            -webkit-box-sizing: border-box !important;
            -moz-box-sizing: border-box !important;
        }
        
        .samsung-internet .input-field.password {
            background: url('./img/UI_Password.png') no-repeat center center !important;
            background-size: 100% 100% !important;
        }
        
        /* Î≤ÑÌäº - ÌÅ¨Î°¨ Ïä§ÌÉÄÏùº Ïú†ÏßÄÌïòÎêò ÌÅ¨Í∏∞Îßå Ï°∞Ï†ï */
        .samsung-internet .auth-button {
            width: 80% !important;
            max-width: 400px !important;
            min-width: 250px !important;
            height: calc(180px * var(--scale-factor)) !important;
            min-height: 60px !important;
            max-height: 80px !important;
            font-size: calc(32px * var(--scale-factor)) !important;
            margin-top: calc(40px * var(--scale-factor)) !important;
            /* ÌÅ¨Î°¨Ïùò border-image ÎåÄÏã† background-image ÏÇ¨Ïö© */
            border: none !important;
            background: url('./img/login_button.png') no-repeat center center !important;
            background-size: 100% 100% !important;
        }
        
        .samsung-internet .auth-button.signup {
            background: url('./img/signup_button.png') no-repeat center center !important;
            background-size: 100% 100% !important;
            margin-top: calc(30px * var(--scale-factor)) !important;
        }
        
        /* ÎÇòÎ®∏ÏßÄ Ïä§ÌÉÄÏùºÏùÄ ÌÅ¨Î°¨Í≥º ÎèôÏùºÌïòÍ≤å Ïú†ÏßÄ */
        .samsung-internet .nav-link {
            font-size: calc(32px * var(--scale-factor)) !important;
        }
        
        .samsung-internet .error-message,
        .samsung-internet .success-message,
        .samsung-internet .loading {
            font-size: calc(14px * var(--scale-factor)) !important;
        }
        
        /* Chrome specific enhancements */
        .chrome-detected .auth-popup {
            border-image: url('./img/login_popup_bg.png') 50 fill;
            border-image-slice: 50 fill;
            border-image-width: calc(50px * var(--scale-factor));
            border-image-outset: 0;
            border-image-repeat: stretch;
            background: transparent;
        }
        
        .chrome-detected .input-field {
            border-image: url('./img/UI_Email.png') 25 fill;
            border-image-slice: 25 fill;
            border-image-width: calc(25px * var(--scale-factor));
            border-image-outset: 0;
            border-image-repeat: stretch;
            background: transparent;
        }
        
        .chrome-detected .input-field.password {
            border-image: url('./img/UI_Password.png') 25 fill;
            border-image-slice: 25 fill;
            border-image-width: calc(25px * var(--scale-factor));
            border-image-outset: 0;
            border-image-repeat: stretch;
            background: transparent;
        }
        
        .chrome-detected .auth-button {
            border-image: url('./img/login_button.png') 30 fill;
            border-image-slice: 30 fill;
            border-image-width: calc(30px * var(--scale-factor));
            border-image-outset: 0;
            border-image-repeat: stretch;
            background: transparent !important;
            min-width: 255px;
            min-height: 60px;
            font-size: calc(32px * var(--scale-factor));
        }
        
        .chrome-detected .auth-button.signup {
            border-image: url('./img/signup_button.png') 30 fill;
            border-image-slice: 30 fill;
            border-image-width: calc(30px * var(--scale-factor));
            border-image-outset: 0;
            border-image-repeat: stretch;
            background: transparent !important;
        }
        
        /* Fallback for browsers that don't support border-image */
        @supports not (border-image: url() 50 fill) {
            .auth-popup:not(.chrome-detected):not(.samsung-internet) {
                border: none;
                background: url('./img/login_popup_bg.png') no-repeat center center;
                background-size: 100% 100%;
                width: 80vw;
                height: 70vh;
                max-width: 400px;
                max-height: 500px;
                min-width: 320px;
                min-height: 400px;
                padding: 60px 40px;
            }
        }

        .fade-out {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .fade-in {
            opacity: 1;
            transition: opacity 0.5s ease;
        }
    </style>
    
    <!-- Firebase Configuration (loaded from .env) -->
    <script src="../public/firebase-config.js"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, connectAuthEmulator } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js';
        import { getDatabase, ref, onValue, off, connectDatabaseEmulator } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js';
        import { getFunctions, httpsCallable, connectFunctionsEmulator } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-functions.js';
        
        // Firebase configuration (loaded from firebase-config.js)
        const firebaseConfig = window.firebaseConfig;
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);

        // ÏóêÎÆ¨Î†àÏù¥ÌÑ∞ Ïó∞Í≤∞ (localhostÏóêÏÑúÎßå)
        if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
            connectAuthEmulator(auth, "http://127.0.0.1:9099", { disableWarnings: true });
            connectDatabaseEmulator(database, "127.0.0.1", 9000);
            console.log('‚úÖ Connected to Firebase Emulators (Auth, Database)');
        }

        // Functions Ï¥àÍ∏∞Ìôî ÏãúÎèÑ (ÏóêÎü¨ Ï≤òÎ¶¨ Ìè¨Ìï®)
        let functions = null;
        try {
            functions = getFunctions(app);
            // Functions ÏóêÎÆ¨Î†àÏù¥ÌÑ∞ Ïó∞Í≤∞ (localhostÏóêÏÑúÎßå)
            if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
                connectFunctionsEmulator(functions, "127.0.0.1", 5001);
                console.log('‚úÖ Connected to Firebase Functions Emulator');
            }
            console.log('‚úÖ Firebase Functions initialized successfully');
        } catch (error) {
            console.error('‚ùå Firebase Functions initialization failed:', error);
        }
        
        // Make available globally
        window.firebaseAuth = auth;
        window.firebaseDatabase = database;
        window.firebaseFunctions = functions; // nullÏùº Ïàò ÏûàÏùå
        window.firebaseRef = ref;
        window.firebaseOnValue = onValue;
        window.firebaseOff = off;
        window.httpsCallable = functions ? httpsCallable : null;
        
        // Firebase Ï¥àÍ∏∞Ìôî ÏôÑÎ£å ÏïåÎ¶º
        window.firebaseReady = true;
        console.log('‚úÖ Firebase initialized and ready');
        console.log('üìä Using real-time sync only (get() is Admin SDK only)');
        
        // Functions Ï¥àÍ∏∞Ìôî ÌôïÏù∏ Î∞è ÎîîÎ≤ÑÍπÖ
        console.log('üîß Functions debug:', {
            functions: typeof functions,
            httpsCallable: typeof httpsCallable,
            windowFunctions: typeof window.firebaseFunctions,
            windowCallable: typeof window.httpsCallable
        });
        
        window.signInWithEmailAndPassword = signInWithEmailAndPassword;
        window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
        window.signOut = signOut;
        window.onAuthStateChanged = onAuthStateChanged;
        
        // Firebase Ï¥àÍ∏∞Ìôî ÏôÑÎ£å ÏïåÎ¶º
        window.firebaseReady = true;
        console.log('‚úÖ Firebase initialized and ready');
        console.log('firebaseGet available:', typeof window.firebaseGet);
        
        // Firebase Ï¥àÍ∏∞Ìôî Ïù¥Î≤§Ìä∏ Î∞úÏÉù
        window.dispatchEvent(new CustomEvent('firebaseReady', {
            detail: { firebaseGet: get, firebaseReady: true }
        }));
        
        // app.jsÎ•º ÎèôÏ†ÅÏúºÎ°ú Î°úÎìú (ÏïΩÍ∞ÑÏùò ÏßÄÏó∞ ÌõÑ)
        setTimeout(() => {
            const appScript = document.createElement('script');
            appScript.src = 'public/app.js';
            appScript.onload = () => {
                console.log('‚úÖ app.js loaded after Firebase initialization');
            };
            document.head.appendChild(appScript);
        }, 100);
    </script>
</head>
<body>
    <!-- Unity Canvas - Base Layer (z-index: 1) -->
    <canvas id="unity-canvas"></canvas>
    
    <!-- Unity Loading Screen (z-index: 2) -->
    <div id="unity-loading" class="unity-loading">
        Loading Unity Game...
    </div>
    
    <!-- Background for Auth (z-index: 500) -->
    <div id="background-container" class="background-container"></div>
    
    <!-- Authentication Container (z-index: 1000) -->
    <div id="auth-container" class="auth-container">
        <!-- Login Form -->
        <div id="login-form" class="auth-popup">
            <h1 class="auth-title">LOGIN</h1>
            
            <div class="input-container">
                <label class="input-label" for="login-email">E-MAIL</label>
                <input type="email" id="login-email" class="input-field" required>
            </div>
            
            <div class="input-container">
                <label class="input-label" for="login-password">PASSWORD</label>
                <input type="password" id="login-password" class="input-field password" required>
            </div>
            
            <button type="button" id="login-btn" class="auth-button"></button>
            
            <div id="login-error" class="error-message"></div>
            <div id="login-loading" class="loading">Logging in...</div>
            
            <a id="show-signup" class="nav-link">Sign Up</a>
        </div>
        
        <!-- Signup Form -->
        <div id="signup-form" class="auth-popup signup hidden">
            <h1 class="auth-title">SIGN UP</h1>
            
            <div class="input-container signup">
                <label class="input-label" for="signup-email">E-MAIL</label>
                <input type="email" id="signup-email" class="input-field" required>
            </div>
            
            <div class="input-container signup">
                <label class="input-label" for="signup-password">PASSWORD</label>
                <input type="password" id="signup-password" class="input-field password" required>
            </div>
            
            <div class="input-container signup">
                <label class="input-label" for="signup-confirm">CONFIRM PASSWORD</label>
                <input type="password" id="signup-confirm" class="input-field password" required>
            </div>
            
            <button type="button" id="signup-btn" class="auth-button signup"></button>
            
            <div id="signup-error" class="error-message"></div>
            <div id="signup-success" class="success-message"></div>
            <div id="signup-loading" class="loading">Creating account...</div>
            
            <a id="show-login" class="nav-link">Already have an account? Login</a>
        </div>
    </div>
    
    <!-- Logo - Always Top (z-index: 9999) -->
    <img src="./img/logo.png" alt="FANTASY STUDIO" class="logo">

    <!-- Unity Loader -->
    <script src="public/Build/pointhub.loader.js"></script>
</body>
</html>